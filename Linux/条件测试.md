# Shell脚本的条件测试

测试语句格式为：

``` c
[ expression ] // 两侧有空格
```

条件测试有4种：

* 文件测试
* 逻辑测试
* 整数值比较
* 字符串比较

> :exclamation: **条件成立返回0，否则返回其他随机数值**。

## 文件测试

文件测试即使用指定条件来判断文件是否存在或权限是否满足等情况的运算符。

|运算符 | 作用|
|-|-|
| `-d` |directory，测试是否为目录|
| `-e` |exist，测试该文件是否存在|
| `-f` |**测试是否为一般文件**|
| `-r` |read，测试是否该文件有读取权限|
| `-w` |write，测试是否该文件有写入权限|
| `-x` |**测试该文件是否有权限执行**|

## 逻辑测试

这里的逻辑测试概念与C中的有些许差别。

``` c
[root@... ~] # [ 测试语句 ] && 命令 // 如果测试语句返回1，则执行后面的命令。
[root@... ~] # [ 测试语句 ] || 命令 // 如果测试语句返回0，则执行后面的命令。
[root@... ~] # [ 测试语句 ] && 命令1 || 命令2 // 如果测试语句返回1，则执行命令1，否则执行命令2。
```

## 整数比较测试

由于 `=` 与赋值运算符冲突， `<` 和 `>` 与重定向命令符冲突，因此整数比较运算符使用如下：

|运算符|作用|
|-|-|
| `-eq` | equal|
| `-nq` | not equal|
| `-gt` | greater|
| `-lt` | lesser|
| `le` | lesser and equal|
| `ge` | greater and equal|

## 字符串比较测试

常见的字符串比较运算符：

|运算符|作用|
|-|-|
| `=` |两个str是否相同|
| `!=` |。。。|
| `-z` |内容是否为空|
