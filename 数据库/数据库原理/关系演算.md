# 关系演算

关系演算是以 **数理逻辑中的谓词演算** 为基础，按照谓词变元的不同，关系演算可分为 **元组关系演算** 和 **域关系演算**。

## 元组关系演算 ALPHA

元组关系演算以 **元组变量** 为谓词变元的基本对象。元组变量其实就是关系中的某一个元组。元组变量是在某一关系范围内变化的，所以又称为 **范围变量**。

```
RANGE Student X 
```
1. 其实该语句类似于 SQL 中的 `as`，相当于给关系（表）起了一个别名。
2. 在使用量词时，必须用元组变量

一种典型的元组关系演算时 ALPHA 语言，而实用化的是 QUEL 语言。ALPHA 语言，主要有 `GET`，`PUT`，`HOLD`，`UPDATE`，`DELETE`，`DROP`。


在 **元组关系演算系统中**，称 {t | Φ(t)} 为元组表达式。其中 t 为元组变量，Φ(t) 为元组演算公式，简称公式。该公式由原子公式和运算符组成。

> 学过谓词推理的知识还是很容易理解的。

原子公式有以下三类：
1. `R(t)`：表示 t 是 R 中的元组。于是关系 R 可以表示为 {t | R(t)}。
2. `t[i] Φ u[j]`，t 和 u 是元组变量，Φ 表示运算符。`t[i] Φ u[j]` 表示断言，即 t 的第 i 个量和 u 的第 j 个分量满足比较关系 Φ。
3. `t[j] Φ c` 或 `c Φ t[j]`

若公式中的一个元组变量前有『全称量词』或『存在量词』，该变量称之为 **约束元变量**，否则称之为 **自由元变量**。

一个元组演算表达式 `{t | Φ(t)}` 表示了使 `Φ(t)` 为真的元组集合。

## 关系演算表达式的 5 中运算

1. 并   
$R \bigcup S = \{t ~| ~R(t) \bigvee S(t)\}$
2. 差   
$R \setminus S = \{t~ | ~R(t) \bigwedge S(t) \}$
3. 笛卡尔积
$R\times S = \{ t^{(n+m)} ~|~ (\exist u^{(n)})(\exist v^{(m)}) (R(u)\bigwedge S(v)\bigwedge t[1]=u[1]\bigwedge \cdots \bigwedge t[n]=u[n]) \bigwedge t[n+1] = v[1] \bigwedge \cdots t[n+m]=v[m]\}$
4. 投影
$\Pi...$
5. 选择
$\sigma_{F}(R) = \{t | R(t) \bigwedge F'\}$

## 域关系演算语言 QBE

域关系演算是以元组变量的分量（即**域变量**）作为谓词变元的基本对象。

QBE (Query By Example)，即通过例子进行查询的简称。