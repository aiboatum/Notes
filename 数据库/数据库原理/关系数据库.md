# 关系数据库的基本概念

一些关系数据库的概念可以在 [概述](概述.md) 之中找到。

## 笛卡尔积

笛卡尔积，又称直积，概念非常简单，对于 集合 A 和 B，其笛卡尔积 $A\times B$ 可表示为，
$$A\times B = \{(x,y)|x\in A, y \in B\} $$
例如，对于 A={a,b}，B={0,1,2}，则
$$A×B=\{(a, 0), (a, 1), (a, 2), (b, 0), (b, 1), (b, 2)\}$$
$$B×A=\{(0, a), (0, b), (1, a), (1, b), (2, a), (2, b)\}$$

## 关系模式

关系模式的概念在 [概述](概述.md) 中的 介绍过。即**关系**是**元组**的集合，而元组是值的列表。展示一个关系的方法就是将它的元组作为一个个的行列出来。列的头称为**属性**，表示每一个分量的含义。关系名、属性名、以及属性类型称作**该关系**的模式。表示为
```
关系名（属性1，属性2，属性3，...，属性n）
```

更具体地，完整的关系模式为
```
R(U,D,dom,F)
```
其中，R 是关系名；U 是该关系所有属性名的集合；D 为属性组 U 中属性所来自域的集合；dom 是属性向域映像的集合；F 是属性间数据依赖关系集合。

## ER 模型转换为关系模式

其实很简单。以下面的 ER 图为例。
![](image/ER.svg)

该 ER 模型可以转换关系模型，过程如下，

1. 实体集 --> 关系模型，此时可成三个关系模式，即
```
职工（职工号，姓名，性别，年龄）        -- 职工号为 key
部门（部门号，部门名称，...）           -- 部门号为 key
职称职务（代号，名称，津贴）              -- 代号为 key
```

2. 将每个联系集转换为关系模式，这里遵守以下规则：
    属性转换遵守以下：
    - 单独的属性都转换为该关系的属性
    - R **涉及到的每个实体集的码属性转换为该关系的属性**
    **key 转换** 遵守以下：
    - 若联系 R 为 1：1 联系，则每个相关实体的码均可作为关系的候选码；
    - 若为 1：N，则关系的码为 N 端实体的码；
    - 若为 M：N，则关系的码为相关实体码的集合

因此，联系可以转换为以下关系模式：
```
分工（职工号，部门号）      -- 职工号为 key
任职（职工号，代号，任职日期） -- （职工号、代号）为 key
```

如果具有相同码的多个关系模式合并成一个关系模型。具有相同码的不同关系模型本质上是描述的同一实体集，因此可以合并。如职工关系和分工关系可以合并为
```
职工（职工号，姓名，性别，年龄，部门号）    -- 职工号为 key
```

## 关系的操作

增删改查等操作。查询操作可以分为：
- select from where
- project 投影
- join 连接
- divide 除
- union
- except
- intersection
- 笛卡尔积


## 关系的完整性约束

完整性约束，规定了数据模型中数据必须符合的条件。为了保护用户对数据库所做的修改不会破坏数据库的完整性。

1. 实体完整性
    - 任一候选码的任何属性都不能为 NULL，即『非空约束』

2. 参照完整性

## 关系代数

本节内容略过。